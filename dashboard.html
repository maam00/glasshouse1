<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass House — $OPEN Intelligence</title>
    <meta name="description" content="Honest operational intelligence for Opendoor investors. No survivorship bias.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --green: #22c55e;
            --green-dim: rgba(34, 197, 94, 0.1);
            --amber: #f59e0b;
            --amber-dim: rgba(245, 158, 11, 0.1);
            --red: #ef4444;
            --red-dim: rgba(239, 68, 68, 0.1);
            --text: #ffffff;
            --text-2: #a0a0a0;
            --text-3: #666666;
            --text-4: #333333;
            --border: #1a1a1a;
            --surface: #0a0a0a;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #000;
            color: var(--text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 760px;
            margin: 0 auto;
            padding: 32px 24px;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            margin-bottom: 40px;
            border-bottom: 1px solid var(--border);
        }

        .brand { font-size: 15px; font-weight: 600; }
        .header-right { display: flex; align-items: center; gap: 16px; font-size: 13px; color: var(--text-2); }
        .ticker { font-family: 'JetBrains Mono', monospace; }

        /* Section */
        .section {
            margin-bottom: 48px;
        }

        .section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-3);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        /* Split Panel */
        .split {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .panel {
            background: var(--surface);
            border-radius: 8px;
            padding: 20px;
        }

        .panel-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-2);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .big-num {
            font-family: 'JetBrains Mono', monospace;
            font-size: 36px;
            font-weight: 600;
            line-height: 1;
            margin-bottom: 4px;
        }

        .big-label {
            font-size: 13px;
            color: var(--text-3);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
            border-bottom: 1px solid #111;
        }

        .stat-row:last-child { border-bottom: none; }
        .stat-label { color: var(--text-2); }
        .stat-value { font-family: 'JetBrains Mono', monospace; }

        .green { color: var(--green); }
        .amber { color: var(--amber); }
        .red { color: var(--red); }

        /* Exposure Box */
        .exposure {
            background: var(--surface);
            border-radius: 8px;
            padding: 20px;
            margin-top: 16px;
        }

        .exposure-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-3);
            margin-bottom: 12px;
        }

        .exposure-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .exposure-item {
            text-align: center;
        }

        .exposure-num {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
        }

        .exposure-label {
            font-size: 11px;
            color: var(--text-3);
            margin-top: 4px;
        }

        /* Progress */
        .progress-bar {
            height: 6px;
            background: var(--text-4);
            border-radius: 3px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
        }

        /* Table */
        .tbl {
            width: 100%;
            font-size: 13px;
            border-collapse: collapse;
        }

        .tbl th {
            text-align: left;
            padding: 10px 8px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-3);
            border-bottom: 1px solid var(--border);
        }

        .tbl td {
            padding: 12px 8px;
            border-bottom: 1px solid #111;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
        }

        .tbl tr:last-child td { border-bottom: none; }
        .tbl .name { font-family: 'Inter', sans-serif; font-weight: 500; }

        /* Velocity Grid */
        .velocity-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .velocity-day {
            background: var(--surface);
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
        }

        .velocity-date {
            font-size: 10px;
            color: var(--text-3);
            margin-bottom: 6px;
        }

        .velocity-homes {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 600;
        }

        .velocity-rev {
            font-size: 11px;
            color: var(--text-2);
            margin-top: 4px;
        }

        /* Metrics Row */
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .metric-card {
            background: var(--surface);
            border-radius: 6px;
            padding: 14px;
            text-align: center;
        }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 600;
        }

        .metric-label {
            font-size: 10px;
            color: var(--text-3);
            margin-top: 4px;
            text-transform: uppercase;
        }

        /* Disclaimer */
        .disclaimer {
            background: #0d0d0d;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 48px;
        }

        .disclaimer-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--amber);
            margin-bottom: 12px;
        }

        .disclaimer-text {
            font-size: 12px;
            color: var(--text-2);
            line-height: 1.6;
        }

        .disclaimer-text strong {
            color: var(--text);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 0 24px;
            border-top: 1px solid var(--border);
            margin-top: 48px;
        }

        .footer-brand { font-size: 14px; font-weight: 600; margin-bottom: 6px; }
        .footer-sub { font-size: 12px; color: var(--text-3); }

        /* Responsive */
        @media (max-width: 600px) {
            .split { grid-template-columns: 1fr; }
            .velocity-grid { grid-template-columns: repeat(3, 1fr); }
            .metrics-row { grid-template-columns: repeat(2, 1fr); }
            .exposure-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <header>
        <div class="brand">Glass House</div>
        <div class="header-right">
            <span class="ticker">$OPEN $5.90</span>
            <span id="date">Jan 27, 2026</span>
        </div>
    </header>

    <!-- KAZ-ERA HEALTH -->
    <section class="section">
        <div class="section-title">Kaz-Era Portfolio (Acquired Nov 2025+)</div>

        <div class="split">
            <div class="panel">
                <div class="panel-title">Sold</div>
                <div class="big-num" id="kaz-sold-count">66</div>
                <div class="big-label">homes closed</div>
                <div style="margin-top: 16px;">
                    <div class="stat-row">
                        <span class="stat-label">Win Rate</span>
                        <span class="stat-value green" id="kaz-sold-wr">98.5%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Avg Profit</span>
                        <span class="stat-value green" id="kaz-sold-profit">$44.4K</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Realized</span>
                        <span class="stat-value" id="kaz-sold-total">+$2.9M</span>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">Still Listed</div>
                <div class="big-num" id="kaz-listed-count">145</div>
                <div class="big-label">homes on market</div>
                <div style="margin-top: 16px;">
                    <div class="stat-row">
                        <span class="stat-label">Above Water</span>
                        <span class="stat-value green" id="kaz-listed-above">85.5% (124)</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Underwater</span>
                        <span class="stat-value red" id="kaz-listed-uw">3.4% (5)</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">With Price Cuts</span>
                        <span class="stat-value amber" id="kaz-listed-cuts">38.6% (56)</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="exposure">
            <div class="exposure-title">Kaz-Era Net Position</div>
            <div class="exposure-grid">
                <div class="exposure-item">
                    <div class="exposure-num green" id="kaz-realized">+$2.9M</div>
                    <div class="exposure-label">Realized Gains</div>
                </div>
                <div class="exposure-item">
                    <div class="exposure-num" id="kaz-unrealized">+$6.8M</div>
                    <div class="exposure-label">Unrealized (Above)</div>
                </div>
                <div class="exposure-item">
                    <div class="exposure-num red" id="kaz-uw-exposure">-$27K</div>
                    <div class="exposure-label">Underwater Exposure</div>
                </div>
            </div>
        </div>
    </section>

    <!-- LEGACY CLEANUP -->
    <section class="section">
        <div class="section-title">Legacy Portfolio (Pre-Kaz)</div>

        <div class="split">
            <div class="panel">
                <div class="panel-title">Sold</div>
                <div class="big-num" id="legacy-sold-count">118</div>
                <div class="big-label">homes closed</div>
                <div style="margin-top: 16px;">
                    <div class="stat-row">
                        <span class="stat-label">Win Rate</span>
                        <span class="stat-value amber" id="legacy-sold-wr">55.9%</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Avg Profit</span>
                        <span class="stat-value" id="legacy-sold-profit">$13.8K</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Realized</span>
                        <span class="stat-value" id="legacy-sold-total">+$1.6M</span>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">Still Listed</div>
                <div class="big-num" id="legacy-listed-count">455</div>
                <div class="big-label">homes on market</div>
                <div style="margin-top: 16px;">
                    <div class="stat-row">
                        <span class="stat-label">Above Water</span>
                        <span class="stat-value" id="legacy-listed-above">39.1% (178)</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Underwater</span>
                        <span class="stat-value red" id="legacy-listed-uw">40.4% (184)</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">With Price Cuts</span>
                        <span class="stat-value red" id="legacy-listed-cuts">99.6% (453)</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="exposure">
            <div class="exposure-title">Legacy Exposure</div>
            <div class="exposure-grid">
                <div class="exposure-item">
                    <div class="exposure-num red" id="legacy-uw-exposure">-$4.95M</div>
                    <div class="exposure-label">Underwater Exposure</div>
                </div>
                <div class="exposure-item">
                    <div class="exposure-num" id="legacy-toxic-remaining">84</div>
                    <div class="exposure-label">Toxic Remaining</div>
                </div>
                <div class="exposure-item">
                    <div class="exposure-num" id="legacy-weeks">~9 wks</div>
                    <div class="exposure-label">To Clear</div>
                </div>
            </div>
        </div>
    </section>

    <!-- VELOCITY -->
    <section class="section">
        <div class="section-title">Daily Velocity</div>

        <div class="velocity-grid" id="velocity-grid">
            <div class="velocity-day">
                <div class="velocity-date">Jan 27</div>
                <div class="velocity-homes">0</div>
                <div class="velocity-rev">$0</div>
            </div>
            <div class="velocity-day">
                <div class="velocity-date">Jan 26</div>
                <div class="velocity-homes">12</div>
                <div class="velocity-rev">$4.2M</div>
            </div>
            <div class="velocity-day">
                <div class="velocity-date">Jan 25</div>
                <div class="velocity-homes">18</div>
                <div class="velocity-rev">$6.8M</div>
            </div>
            <div class="velocity-day">
                <div class="velocity-date">Jan 24</div>
                <div class="velocity-homes">15</div>
                <div class="velocity-rev">$5.5M</div>
            </div>
            <div class="velocity-day">
                <div class="velocity-date">Jan 23</div>
                <div class="velocity-homes">22</div>
                <div class="velocity-rev">$8.1M</div>
            </div>
        </div>

        <div class="metrics-row">
            <div class="metric-card">
                <div class="metric-value" id="vel-7day-homes">15.2</div>
                <div class="metric-label">Homes/Day (7d)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="vel-7day-rev">$4.6M</div>
                <div class="metric-label">Revenue/Day (7d)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value amber" id="vel-q1-proj">$410M</div>
                <div class="metric-label">Q1 Projected</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="vel-q1-target">$595M</div>
                <div class="metric-label">Q1 Guidance</div>
            </div>
        </div>

        <div class="progress-bar" style="margin-top: 20px;">
            <div class="progress-fill" id="q1-progress" style="width: 20%; background: var(--amber);"></div>
        </div>
        <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--text-3); margin-top: 8px;">
            <span><span id="q1-rev">$119.7M</span> revenue</span>
            <span><span id="q1-pct">20.1%</span> of guidance • Behind pace</span>
        </div>
    </section>

    <!-- PRICE CUTS -->
    <section class="section">
        <div class="section-title">Price Cut Analysis (Leading Indicator)</div>

        <table class="tbl">
            <thead>
                <tr>
                    <th>Portfolio</th>
                    <th>Listed</th>
                    <th>With Cuts</th>
                    <th>% Cut</th>
                    <th>Avg Cut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="name">Kaz-Era</td>
                    <td id="cuts-kaz-listed">145</td>
                    <td id="cuts-kaz-count">56</td>
                    <td class="amber" id="cuts-kaz-pct">38.6%</td>
                    <td id="cuts-kaz-avg">$10.1K</td>
                </tr>
                <tr>
                    <td class="name">Legacy</td>
                    <td id="cuts-legacy-listed">455</td>
                    <td id="cuts-legacy-count">453</td>
                    <td class="red" id="cuts-legacy-pct">99.6%</td>
                    <td id="cuts-legacy-avg">$38.2K</td>
                </tr>
            </tbody>
        </table>

        <div style="margin-top: 16px; font-size: 13px; color: var(--text-2);">
            Price cuts are a leading indicator. 99.6% of legacy homes have cuts — they're taking the pain to clear.
        </div>
    </section>

    <!-- GEOGRAPHIC RISK -->
    <section class="section">
        <div class="section-title">Geographic Risk</div>

        <table class="tbl">
            <thead>
                <tr>
                    <th>State</th>
                    <th>Inventory</th>
                    <th>Underwater</th>
                    <th>UW Rate</th>
                    <th>Risk</th>
                </tr>
            </thead>
            <tbody id="geo-table">
                <tr>
                    <td class="name">NC</td>
                    <td>127</td>
                    <td>38</td>
                    <td class="amber">29.9%</td>
                    <td class="amber">Medium</td>
                </tr>
                <tr>
                    <td class="name">GA</td>
                    <td>102</td>
                    <td>45</td>
                    <td class="red">44.1%</td>
                    <td class="red">High</td>
                </tr>
                <tr>
                    <td class="name">TX</td>
                    <td>89</td>
                    <td>22</td>
                    <td class="amber">24.7%</td>
                    <td class="amber">Medium</td>
                </tr>
                <tr>
                    <td class="name">FL</td>
                    <td>85</td>
                    <td>41</td>
                    <td class="red">48.2%</td>
                    <td class="red">High</td>
                </tr>
                <tr>
                    <td class="name">AZ</td>
                    <td>59</td>
                    <td>12</td>
                    <td>20.3%</td>
                    <td>Low</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- DISCLAIMER -->
    <div class="disclaimer">
        <div class="disclaimer-title">⚠️ Data Transparency</div>
        <div class="disclaimer-text">
            Win rates reflect <strong>sold homes only</strong>. Homes still listed may lose money when sold.<br><br>
            <strong>Kaz-era:</strong> <span id="disc-kaz-sold">66</span> sold (<span id="disc-kaz-wr">98.5%</span> win) + <span id="disc-kaz-listed">145</span> listed (<span id="disc-kaz-uw">5</span> underwater)<br>
            <strong>Legacy:</strong> <span id="disc-legacy-sold">118</span> sold (<span id="disc-legacy-wr">55.9%</span> win) + <span id="disc-legacy-listed">455</span> listed (<span id="disc-legacy-uw">184</span> underwater)<br><br>
            <strong>Total underwater exposure from listed homes: <span class="red" id="disc-total-exposure">$4.98M</span></strong>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-brand">Glass House</div>
        <div class="footer-sub">Honest data for $OPEN shareholders • No survivorship bias</div>
    </footer>

</div>

<script>
async function loadData() {
    try {
        const r = await fetch('outputs/dashboard_data.json');
        if (!r.ok) return null;
        return await r.json();
    } catch { return null; }
}

function fmt(v) {
    if (Math.abs(v) >= 1e6) return '$' + (v/1e6).toFixed(1) + 'M';
    if (Math.abs(v) >= 1e3) return '$' + (v/1e3).toFixed(1) + 'K';
    return '$' + v.toFixed(0);
}

function render(data) {
    if (!data) return;
    const d = data.current;
    const kaz = d.kaz_era || {};
    const g = d.guidance || {};
    const toxic = d.toxic || {};

    // Date
    document.getElementById('date').textContent = new Date().toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'});

    // Kaz-Era section - use actual data when available
    if (kaz.realized) {
        document.getElementById('kaz-sold-count').textContent = kaz.realized.count || 66;
        document.getElementById('kaz-sold-wr').textContent = (kaz.realized.win_rate || 98.5).toFixed(1) + '%';
        document.getElementById('kaz-sold-profit').textContent = fmt(kaz.realized.avg_profit || 44400);
    }

    // Q1 Guidance
    if (g.revenue_to_date) {
        document.getElementById('q1-rev').textContent = fmt(g.revenue_to_date);
        document.getElementById('q1-pct').textContent = (g.pct_to_target || 20.1).toFixed(1) + '%';
        document.getElementById('q1-progress').style.width = Math.min(g.pct_to_target || 20.1, 100) + '%';
        document.getElementById('vel-q1-proj').textContent = fmt(g.projected_quarter_revenue || 410000000);
    }

    // Toxic
    if (toxic.remaining_count) {
        document.getElementById('legacy-toxic-remaining').textContent = toxic.remaining_count;
        document.getElementById('legacy-weeks').textContent = '~' + Math.ceil(toxic.weeks_to_clear || 9) + ' wks';
    }
}

loadData().then(render);
setInterval(() => loadData().then(render), 300000);
</script>
</body>
</html>
