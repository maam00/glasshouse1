<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass House Terminal ‚Äî $OPEN Intelligence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --green: #22c55e;
            --green-dim: rgba(34, 197, 94, 0.15);
            --yellow: #eab308;
            --yellow-dim: rgba(234, 179, 8, 0.15);
            --amber: #f59e0b;
            --amber-dim: rgba(245, 158, 11, 0.15);
            --red: #ef4444;
            --red-dim: rgba(239, 68, 68, 0.15);
            --blue: #3b82f6;
            --blue-dim: rgba(59, 130, 246, 0.15);
            --text: #ffffff;
            --text-2: #a0a0a0;
            --text-3: #666666;
            --text-4: #333333;
            --border: #1f1f1f;
            --surface: #0d0d0d;
            --card: #141414;
            --bg: #000;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }

        .mono { font-family: 'JetBrains Mono', monospace; }

        /* ============================================================
           LAYOUT
           ============================================================ */
        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            background: var(--surface);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header__left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header__brand {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .header__score {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--card);
            padding: 8px 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .header__score-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 700;
        }

        .header__score-label {
            font-size: 11px;
            color: var(--text-2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .header__right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header__ticker {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-2);
        }

        .header__updated {
            font-size: 11px;
            color: var(--text-3);
        }

        /* ============================================================
           TABS (Mode Navigation)
           ============================================================ */
        .tabs {
            display: flex;
            gap: 0;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 0 24px;
        }

        .tab {
            padding: 14px 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-3);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--text-2);
        }

        .tab.active {
            color: var(--text);
            border-bottom-color: var(--text);
        }

        /* ============================================================
           MAIN CONTENT
           ============================================================ */
        .main {
            flex: 1;
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .mode {
            display: none;
        }

        .mode.active {
            display: block;
        }

        /* ============================================================
           SIGNAL PACK (NOW Mode)
           ============================================================ */
        .ops-score {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .ops-score__gauge {
            width: 120px;
            height: 120px;
            position: relative;
            flex-shrink: 0;
        }

        .ops-score__ring {
            width: 100%;
            height: 100%;
        }

        .ops-score__value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .ops-score__number {
            font-family: 'JetBrains Mono', monospace;
            font-size: 32px;
            font-weight: 700;
            line-height: 1;
        }

        .ops-score__max {
            font-size: 12px;
            color: var(--text-3);
        }

        .ops-score__details {
            flex: 1;
        }

        .ops-score__headline {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .ops-score__summary {
            font-size: 14px;
            color: var(--text-2);
            line-height: 1.6;
        }

        .ops-score__factors {
            display: flex;
            gap: 24px;
            margin-top: 16px;
        }

        .ops-score__factor {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .ops-score__factor-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        /* ============================================================
           SIGNAL CARDS
           ============================================================ */
        .signals {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .signal {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 18px;
            position: relative;
        }

        .signal--wide {
            grid-column: span 2;
        }

        .signal__header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .signal__name {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-2);
        }

        .signal__confidence {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .signal__badge {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 3px;
            text-transform: uppercase;
        }

        .signal__badge--a { background: var(--green-dim); color: var(--green); }
        .signal__badge--b { background: var(--yellow-dim); color: var(--yellow); }
        .signal__badge--c { background: var(--red-dim); color: var(--red); }

        .signal__body {
            display: flex;
            align-items: flex-end;
            gap: 16px;
        }

        .signal__value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 28px;
            font-weight: 600;
            line-height: 1;
        }

        .signal__meta {
            flex: 1;
        }

        .signal__delta {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 4px;
        }

        .signal__delta-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
        }

        .signal__delta-label {
            color: var(--text-3);
        }

        .signal__sparkline {
            height: 24px;
            width: 80px;
        }

        .signal__status {
            display: inline-block;
            font-size: 10px;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .signal__status--green { background: var(--green-dim); color: var(--green); }
        .signal__status--yellow { background: var(--yellow-dim); color: var(--yellow); }
        .signal__status--red { background: var(--red-dim); color: var(--red); }

        .signal__footer {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            font-size: 10px;
            color: var(--text-3);
        }

        .signal__source {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .signal__coverage {
            font-family: 'JetBrains Mono', monospace;
        }

        /* ============================================================
           THIS WEEK CHANGES
           ============================================================ */
        .changes {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 18px;
        }

        .changes__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .changes__title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-2);
        }

        .changes__date {
            font-size: 11px;
            color: var(--text-3);
        }

        .changes__grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .changes__group-title {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }

        .changes__group-title--up { color: var(--green); }
        .changes__group-title--flat { color: var(--text-3); }
        .changes__group-title--down { color: var(--amber); }

        .changes__item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 12px;
            color: var(--text-2);
            margin-bottom: 8px;
        }

        .changes__icon {
            flex-shrink: 0;
            width: 14px;
            text-align: center;
        }

        /* ============================================================
           DRIVERS MODE
           ============================================================ */
        .section {
            margin-bottom: 24px;
        }

        .section__title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-3);
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 18px;
        }

        .card__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
        }

        .card__title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-2);
        }

        .card__badge {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .big-stat {
            margin-bottom: 16px;
        }

        .big-stat__value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 32px;
            font-weight: 600;
            line-height: 1;
        }

        .big-stat__label {
            font-size: 12px;
            color: var(--text-3);
            margin-top: 4px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
            border-bottom: 1px solid var(--border);
        }

        .stat-row:last-child { border-bottom: none; }
        .stat-row__label { color: var(--text-2); }
        .stat-row__value { font-family: 'JetBrains Mono', monospace; }

        .green { color: var(--green); }
        .yellow { color: var(--yellow); }
        .amber { color: var(--amber); }
        .red { color: var(--red); }
        .blue { color: var(--blue); }

        /* ============================================================
           TABLES
           ============================================================ */
        .tbl {
            width: 100%;
            font-size: 12px;
            border-collapse: collapse;
        }

        .tbl th {
            text-align: left;
            padding: 10px 8px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-3);
            border-bottom: 1px solid var(--border);
        }

        .tbl td {
            padding: 10px 8px;
            border-bottom: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
        }

        .tbl tr:last-child td { border-bottom: none; }
        .tbl .name { font-family: 'Inter', sans-serif; font-weight: 500; }

        .action-badge {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 3px;
            text-transform: uppercase;
        }

        .action-badge--grow { background: var(--green-dim); color: var(--green); }
        .action-badge--hold { background: var(--blue-dim); color: var(--blue); }
        .action-badge--pause { background: var(--yellow-dim); color: var(--yellow); }
        .action-badge--exit { background: var(--red-dim); color: var(--red); }

        /* State badges (G/Y/R) */
        .signal__badge--g { background: var(--green-dim); color: var(--green); }
        .signal__badge--y { background: var(--yellow-dim); color: var(--yellow); }
        .signal__badge--r { background: var(--red-dim); color: var(--red); }

        /* ============================================================
           PROGRESS BARS
           ============================================================ */
        .progress {
            margin: 16px 0;
        }

        .progress__labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 6px;
        }

        .progress__bar {
            height: 8px;
            background: var(--text-4);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress__fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }

        /* ============================================================
           CHART CONTAINER
           ============================================================ */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
        }

        .chart-container__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .chart-container__title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-2);
        }

        .chart {
            height: 200px;
        }

        /* ============================================================
           DISCLAIMER
           ============================================================ */
        .disclaimer {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-top: 24px;
        }

        .disclaimer__title {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--amber);
            margin-bottom: 8px;
        }

        .disclaimer__text {
            font-size: 11px;
            color: var(--text-3);
            line-height: 1.6;
        }

        /* ============================================================
           TAPE FEED
           ============================================================ */
        .tape-feed {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .tape-day {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
        }

        .tape-day--empty {
            opacity: 0.6;
        }

        .tape-day__header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .tape-day__date {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-2);
        }

        .tape-day__badge {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 3px;
            background: var(--blue-dim);
            color: var(--blue);
            text-transform: uppercase;
        }

        .tape-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .tape-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .tape-item__icon {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            font-weight: 700;
            min-width: 24px;
            text-align: center;
        }

        .tape-item--high .tape-item__icon { color: var(--red); }
        .tape-item--medium .tape-item__icon { color: var(--yellow); }
        .tape-item--low .tape-item__icon { color: var(--text-3); }

        .tape-item__content {
            flex: 1;
        }

        .tape-item__headline {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .tape-item__detail {
            font-size: 11px;
            color: var(--text-3);
        }

        .tape-item__meta {
            display: flex;
            align-items: center;
        }

        .tape-item__type {
            font-size: 9px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 3px;
            background: var(--surface);
            color: var(--text-3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ============================================================
           RESPONSIVE
           ============================================================ */
        @media (max-width: 900px) {
            .signals { grid-template-columns: repeat(2, 1fr); }
            .signal--wide { grid-column: span 2; }
            .changes__grid { grid-template-columns: 1fr; }
            .grid-2 { grid-template-columns: 1fr; }
        }

        @media (max-width: 600px) {
            .signals { grid-template-columns: 1fr; }
            .signal--wide { grid-column: span 1; }
            .ops-score { flex-direction: column; text-align: center; }
            .ops-score__factors { justify-content: center; flex-wrap: wrap; }
        }
    </style>
</head>
<body>
<div class="app">

    <!-- ============================================================
         HEADER
         ============================================================ -->
    <header class="header">
        <div class="header__left">
            <div class="header__brand">Glass House Terminal</div>
            <div class="header__score">
                <div>
                    <div class="header__score-value yellow" id="header-score">62</div>
                </div>
                <div>
                    <div class="header__score-label">Ops Score</div>
                </div>
            </div>
        </div>
        <div class="header__right">
            <span class="header__ticker">$OPEN</span>
            <span class="header__updated" id="last-updated">Updated: Jan 29, 2026 1:45 PM</span>
        </div>
    </header>

    <!-- ============================================================
         TABS
         ============================================================ -->
    <nav class="tabs">
        <div class="tab active" data-mode="now">Now</div>
        <div class="tab" data-mode="drivers">Drivers</div>
        <div class="tab" data-mode="risk">Risk</div>
        <div class="tab" data-mode="tape">Tape</div>
    </nav>

    <!-- ============================================================
         MAIN CONTENT
         ============================================================ -->
    <main class="main">

        <!-- ============================================================
             NOW MODE
             ============================================================ -->
        <div class="mode active" id="mode-now">

            <!-- Ops Score Hero -->
            <div class="ops-score">
                <div class="ops-score__gauge">
                    <svg class="ops-score__ring" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#333" stroke-width="8"/>
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#eab308" stroke-width="8"
                                stroke-dasharray="283" stroke-dashoffset="107"
                                transform="rotate(-90 50 50)" stroke-linecap="round"/>
                    </svg>
                    <div class="ops-score__value">
                        <div class="ops-score__number yellow" id="ops-score-value">62</div>
                        <div class="ops-score__max">/100</div>
                    </div>
                </div>
                <div class="ops-score__details">
                    <div class="ops-score__headline" id="ops-headline">YELLOW: Operational Concerns</div>
                    <div class="ops-score__summary" id="ops-summary">
                        Pace is 9% below required for Q1 guidance. New book economics remain strong (95% win rate),
                        but legacy burn-down is slow and inventory liquidity is concerning (42.9 months).
                        Need velocity increase or guidance miss likely.
                    </div>
                    <div class="ops-score__factors">
                        <div class="ops-score__factor">
                            <div class="ops-score__factor-dot" style="background: var(--yellow);"></div>
                            <span>Pace: -9%</span>
                        </div>
                        <div class="ops-score__factor">
                            <div class="ops-score__factor-dot" style="background: var(--green);"></div>
                            <span>New Book: Strong</span>
                        </div>
                        <div class="ops-score__factor">
                            <div class="ops-score__factor-dot" style="background: var(--yellow);"></div>
                            <span>Legacy: Clearing</span>
                        </div>
                        <div class="ops-score__factor">
                            <div class="ops-score__factor-dot" style="background: var(--red);"></div>
                            <span>Liquidity: Low</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Signal Pack -->
            <div class="signals">

                <!-- Signal 1: Guidance Pace -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">Guidance Pace</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--a">A</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value yellow" id="sig-pace">-9%</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value red">‚Üì 2pp</span>
                                <span class="signal__delta-label">7D</span>
                            </div>
                            <div class="signal__sparkline" id="spark-pace"></div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--yellow">BEHIND PACE</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>üìä</span> Singularity
                        </div>
                        <div class="signal__coverage">n=747 ¬∑ 100%</div>
                    </div>
                </div>

                <!-- Signal 2: New Book Unit Econ -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">New Book Econ (Kaz-Era)</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--b">B</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value green" id="sig-newbook">95.3%</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value green">‚Üë 0.5pp</span>
                                <span class="signal__delta-label">7D</span>
                            </div>
                            <div class="signal__sparkline" id="spark-newbook"></div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--green">STRONG</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>üìä</span> Parcl
                        </div>
                        <div class="signal__coverage">n=47 ¬∑ 38.7%</div>
                    </div>
                </div>

                <!-- Signal 3: Legacy Burn-down -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">Legacy Burn-down</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--a">A</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value" id="sig-toxic">82</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value green">‚Üì 7</span>
                                <span class="signal__delta-label">28D</span>
                            </div>
                            <div class="signal__sparkline" id="spark-toxic"></div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--yellow">CLEARING</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>üìä</span> Parcl
                        </div>
                        <div class="signal__coverage">n=852 ¬∑ 100%</div>
                    </div>
                </div>

                <!-- Signal 4: Inventory Liquidity -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">Inventory Liquidity</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--c">C</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value red" id="sig-liquidity">42.9</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value">‚Äî</span>
                                <span class="signal__delta-label">mos inv</span>
                            </div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--red">PARTIAL DATA</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>‚ö†Ô∏è</span> MLS scrape
                        </div>
                        <div class="signal__coverage">n=42 ¬∑ ~7%</div>
                    </div>
                </div>

                <!-- Signal 5: Market Quality -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">Market Quality</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--b">B</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value yellow" id="sig-markets">3/10</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value">GROW</span>
                                <span class="signal__delta-label">markets</span>
                            </div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--yellow">MIXED</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>üìä</span> Parcl + MLS
                        </div>
                        <div class="signal__coverage">10 markets</div>
                    </div>
                </div>

                <!-- Signal 6: Price-Cut Stress -->
                <div class="signal">
                    <div class="signal__header">
                        <div class="signal__name">Price-Cut Stress</div>
                        <div class="signal__confidence">
                            <span class="signal__badge signal__badge--a">A</span>
                        </div>
                    </div>
                    <div class="signal__body">
                        <div class="signal__value red" id="sig-cuts">88.8%</div>
                        <div class="signal__meta">
                            <div class="signal__delta">
                                <span class="signal__delta-value amber">6.1</span>
                                <span class="signal__delta-label">avg cuts</span>
                            </div>
                        </div>
                    </div>
                    <div class="signal__status signal__status--red">HIGH STRESS</div>
                    <div class="signal__footer">
                        <div class="signal__source">
                            <span>üìä</span> Parcl
                        </div>
                        <div class="signal__coverage">n=852 ¬∑ 100%</div>
                    </div>
                </div>

            </div>

            <!-- OPS Score Breakdown -->
            <div class="section" style="margin-top: 24px;">
                <div class="section__title">OPS Score Breakdown</div>
                <div class="card">
                    <table class="tbl" id="ops-breakdown-table">
                        <thead>
                            <tr>
                                <th>Signal</th>
                                <th>Value</th>
                                <th>State</th>
                                <th>Conf</th>
                                <th>Weight</th>
                                <th>Contribution</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="name">Guidance Pace</td>
                                <td>91.0%</td>
                                <td><span class="signal__badge signal__badge--y">Y</span></td>
                                <td><span class="signal__badge signal__badge--a">A</span></td>
                                <td>0.243</td>
                                <td class="yellow">14.8</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Slightly behind at 91% of target</td>
                            </tr>
                            <tr>
                                <td class="name">Kaz Economics</td>
                                <td>95.3%</td>
                                <td><span class="signal__badge signal__badge--g">G</span></td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                                <td>0.127</td>
                                <td class="green">12.1</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Exceptional: 45/47 profitable (95.7%)</td>
                            </tr>
                            <tr>
                                <td class="name">Legacy Burndown</td>
                                <td>87.1%</td>
                                <td><span class="signal__badge signal__badge--g">G</span></td>
                                <td><span class="signal__badge signal__badge--a">A</span></td>
                                <td>0.150</td>
                                <td class="green">13.1</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Only 12.9% legacy inventory remains</td>
                            </tr>
                            <tr>
                                <td class="name">Inventory Aging</td>
                                <td>68 DOM</td>
                                <td><span class="signal__badge signal__badge--y">Y</span></td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                                <td>0.098</td>
                                <td class="yellow">6.8</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Healthy aging at 68 avg DOM</td>
                            </tr>
                            <tr>
                                <td class="name">Pricecut Stress</td>
                                <td>34.2%</td>
                                <td><span class="signal__badge signal__badge--y">Y</span></td>
                                <td><span class="signal__badge signal__badge--a">A</span></td>
                                <td>0.150</td>
                                <td class="yellow">6.4</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Moderate stress: 34.2% with heavy cuts</td>
                            </tr>
                            <tr>
                                <td class="name">Underwater Exposure</td>
                                <td>23.5%</td>
                                <td><span class="signal__badge signal__badge--y">Y</span></td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                                <td>0.065</td>
                                <td class="yellow">3.4</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Moderate exposure: 200 homes underwater</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr style="border-top: 2px solid var(--border);">
                                <td colspan="4" style="font-weight: 600;">TOTAL OPS SCORE</td>
                                <td style="font-weight: 600;">0.833</td>
                                <td style="font-weight: 700; font-size: 14px;" class="yellow">56.6</td>
                                <td style="font-family: Inter; font-size: 11px; color: var(--text-2);">Grade: C+ (2G/4Y/0R)</td>
                            </tr>
                        </tfoot>
                    </table>
                    <div class="signal__footer" style="margin-top: 12px;">
                        <div class="signal__source">Formula: OPS = Œ£(base_weight √ó conf_mult √ó ‚àöcoverage √ó normalized_value)</div>
                        <div class="signal__coverage">Conf multipliers: A=1.0, B=0.65, C=0.30</div>
                    </div>
                </div>
            </div>

            <!-- This Week Changes -->
            <div class="changes">
                <div class="changes__header">
                    <div class="changes__title">What Changed This Week</div>
                    <div class="changes__date">Jan 22-29</div>
                </div>
                <div class="changes__grid">
                    <div class="changes__group">
                        <div class="changes__group-title changes__group-title--up">‚ñ≤ Improving</div>
                        <div class="changes__item">
                            <span class="changes__icon green">‚úì</span>
                            <span>Toxic inventory: 89 ‚Üí 82 (-7)</span>
                        </div>
                        <div class="changes__item">
                            <span class="changes__icon green">‚úì</span>
                            <span>Legacy underwater: 198 ‚Üí 190 (-8)</span>
                        </div>
                        <div class="changes__item">
                            <span class="changes__icon green">‚úì</span>
                            <span>Kaz-era win rate holding at 95.3%</span>
                        </div>
                    </div>
                    <div class="changes__group">
                        <div class="changes__group-title changes__group-title--flat">‚Äî Stable</div>
                        <div class="changes__item">
                            <span class="changes__icon">‚Äî</span>
                            <span>New cohort margin steady (10.7%)</span>
                        </div>
                        <div class="changes__item">
                            <span class="changes__icon">‚Äî</span>
                            <span>Overall win rate: 79.1%</span>
                        </div>
                    </div>
                    <div class="changes__group">
                        <div class="changes__group-title changes__group-title--down">‚ñº Watching</div>
                        <div class="changes__item">
                            <span class="changes__icon amber">‚ö†</span>
                            <span>Daily velocity: 22 vs 29 needed</span>
                        </div>
                        <div class="changes__item">
                            <span class="changes__icon amber">‚ö†</span>
                            <span>Austin/San Antonio: 0 sales in 90d</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ============================================================
             DRIVERS MODE
             ============================================================ -->
        <div class="mode" id="mode-drivers">

            <div class="section">
                <div class="section__title">Portfolio Segmentation</div>
                <div class="grid-2">

                    <!-- Kaz-Era Portfolio -->
                    <div class="card">
                        <div class="card__header">
                            <div class="card__title">Kaz-Era (Acquired Sep 2025+)</div>
                            <span class="card__badge signal__badge--a">A</span>
                        </div>
                        <div class="big-stat">
                            <div class="big-stat__value green">95.3%</div>
                            <div class="big-stat__label">Win Rate (47 sales with P&L)</div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Avg Profit</span>
                            <span class="stat-row__value green">$45.1K</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Still Listed</span>
                            <span class="stat-row__value">109 homes</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Underwater</span>
                            <span class="stat-row__value red">4 (3.7%)</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">With Price Cuts</span>
                            <span class="stat-row__value amber">35%</span>
                        </div>
                    </div>

                    <!-- Legacy Portfolio -->
                    <div class="card">
                        <div class="card__header">
                            <div class="card__title">Legacy (Pre-Sep 2025)</div>
                            <span class="card__badge signal__badge--b">B</span>
                        </div>
                        <div class="big-stat">
                            <div class="big-stat__value amber">64.5%</div>
                            <div class="big-stat__label">Win Rate (230 sales with P&L)</div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Avg Profit</span>
                            <span class="stat-row__value">$23.7K</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Still Listed</span>
                            <span class="stat-row__value">743 homes</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Underwater</span>
                            <span class="stat-row__value red">200 (26.9%)</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">With Price Cuts</span>
                            <span class="stat-row__value red">96.1%</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="section">
                <div class="section__title">Cohort Performance (by Days Held)</div>
                <div class="card">
                    <table class="tbl">
                        <thead>
                            <tr>
                                <th>Cohort</th>
                                <th>Sold</th>
                                <th>Win Rate</th>
                                <th>Margin</th>
                                <th>Avg Profit</th>
                                <th>Confidence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="name">New (&lt;90d)</td>
                                <td>76</td>
                                <td class="green">89.5%</td>
                                <td class="green">10.7%</td>
                                <td class="green">$42.0K</td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                            </tr>
                            <tr>
                                <td class="name">Mid (90-180d)</td>
                                <td>106</td>
                                <td>84.9%</td>
                                <td>10.0%</td>
                                <td>$36.8K</td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                            </tr>
                            <tr>
                                <td class="name">Old (180-365d)</td>
                                <td>106</td>
                                <td class="amber">53.8%</td>
                                <td>5.6%</td>
                                <td>$22.0K</td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                            </tr>
                            <tr>
                                <td class="name">Toxic (&gt;365d)</td>
                                <td>45</td>
                                <td class="red">31.1%</td>
                                <td class="red">-3.7%</td>
                                <td class="red">-$11.6K</td>
                                <td><span class="signal__badge signal__badge--b">B</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="signal__footer" style="margin-top: 12px;">
                        <div class="signal__source">Source: Parcl (P&L data)</div>
                        <div class="signal__coverage">Coverage: 38.7% of Q1 sales have P&L</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section__title">Market Velocity</div>
                <div class="card">
                    <table class="tbl">
                        <thead>
                            <tr>
                                <th>Market</th>
                                <th>Active</th>
                                <th>Sold (90d)</th>
                                <th>Turnover</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="name">Charlotte, NC</td>
                                <td>30</td>
                                <td class="green">6</td>
                                <td class="green">20.0%</td>
                                <td><span class="action-badge action-badge--grow">GROW</span></td>
                            </tr>
                            <tr>
                                <td class="name">Phoenix, AZ</td>
                                <td>30</td>
                                <td>5</td>
                                <td>16.7%</td>
                                <td><span class="action-badge action-badge--grow">GROW</span></td>
                            </tr>
                            <tr>
                                <td class="name">Raleigh, NC</td>
                                <td>30</td>
                                <td>5</td>
                                <td>16.7%</td>
                                <td><span class="action-badge action-badge--grow">GROW</span></td>
                            </tr>
                            <tr>
                                <td class="name">Dallas, TX</td>
                                <td>30</td>
                                <td>2</td>
                                <td class="amber">6.7%</td>
                                <td><span class="action-badge action-badge--hold">HOLD</span></td>
                            </tr>
                            <tr>
                                <td class="name">Atlanta, GA</td>
                                <td>30</td>
                                <td>2</td>
                                <td class="amber">6.7%</td>
                                <td><span class="action-badge action-badge--hold">HOLD</span></td>
                            </tr>
                            <tr>
                                <td class="name">Austin, TX</td>
                                <td>30</td>
                                <td class="red">0</td>
                                <td class="red">0.0%</td>
                                <td><span class="action-badge action-badge--pause">PAUSE</span></td>
                            </tr>
                            <tr>
                                <td class="name">San Antonio, TX</td>
                                <td>30</td>
                                <td class="red">0</td>
                                <td class="red">0.0%</td>
                                <td><span class="action-badge action-badge--pause">PAUSE</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="signal__footer" style="margin-top: 12px;">
                        <div class="signal__source">‚ö†Ô∏è Source: MLS scrape (agent matching)</div>
                        <div class="signal__coverage">Coverage: Partial (~7% of actual sales)</div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ============================================================
             RISK MODE
             ============================================================ -->
        <div class="mode" id="mode-risk">

            <div class="section">
                <div class="section__title">Toxic Inventory Clearance</div>
                <div class="card">
                    <div class="card__header">
                        <div class="card__title">Legacy Toxic (&gt;365 days held)</div>
                        <span class="card__badge signal__badge--a">A</span>
                    </div>
                    <div class="progress">
                        <div class="progress__labels">
                            <span class="green">45 cleared</span>
                            <span class="red">82 remaining</span>
                        </div>
                        <div class="progress__bar">
                            <div class="progress__fill" style="width: 35.4%; background: var(--green);"></div>
                        </div>
                    </div>
                    <div class="stat-row">
                        <span class="stat-row__label">Clearance Rate</span>
                        <span class="stat-row__value">~5/week</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-row__label">Projected Zero</span>
                        <span class="stat-row__value">Early May 2026</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-row__label">Avg Loss (Toxic)</span>
                        <span class="stat-row__value red">-$11.6K</span>
                    </div>
                    <div class="signal__footer" style="margin-top: 12px;">
                        <div class="signal__source">Source: Parcl listings</div>
                        <div class="signal__coverage">Coverage: 100%</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section__title">Geographic Risk</div>
                <div class="card">
                    <table class="tbl">
                        <thead>
                            <tr>
                                <th>State</th>
                                <th>Inventory</th>
                                <th>Underwater</th>
                                <th>UW Rate</th>
                                <th>Risk</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="name">Florida</td>
                                <td>98</td>
                                <td class="red">41</td>
                                <td class="red">41.8%</td>
                                <td><span class="action-badge action-badge--exit">HIGH</span></td>
                            </tr>
                            <tr>
                                <td class="name">Georgia</td>
                                <td>110</td>
                                <td class="red">45</td>
                                <td class="red">40.9%</td>
                                <td><span class="action-badge action-badge--exit">HIGH</span></td>
                            </tr>
                            <tr>
                                <td class="name">North Carolina</td>
                                <td>128</td>
                                <td>38</td>
                                <td class="amber">29.7%</td>
                                <td><span class="action-badge action-badge--pause">MED</span></td>
                            </tr>
                            <tr>
                                <td class="name">Texas</td>
                                <td>101</td>
                                <td>22</td>
                                <td class="amber">21.8%</td>
                                <td><span class="action-badge action-badge--hold">MED</span></td>
                            </tr>
                            <tr>
                                <td class="name">Arizona</td>
                                <td>71</td>
                                <td>12</td>
                                <td>16.9%</td>
                                <td><span class="action-badge action-badge--grow">LOW</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="signal__footer" style="margin-top: 12px;">
                        <div class="signal__source">Source: Parcl listings</div>
                        <div class="signal__coverage">Coverage: 100%</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section__title">Underwater Exposure</div>
                <div class="grid-2">
                    <div class="card">
                        <div class="card__header">
                            <div class="card__title">Total Underwater</div>
                        </div>
                        <div class="big-stat">
                            <div class="big-stat__value red">200</div>
                            <div class="big-stat__label">homes (23.5% of inventory)</div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Total Exposure</span>
                            <span class="stat-row__value red">-$5.5M</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Avg per Home</span>
                            <span class="stat-row__value red">-$27.5K</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card__header">
                            <div class="card__title">Price Cut Severity</div>
                        </div>
                        <div class="big-stat">
                            <div class="big-stat__value red">757</div>
                            <div class="big-stat__label">homes with cuts (88.8%)</div>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">Avg Cuts/Home</span>
                            <span class="stat-row__value amber">6.1</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-row__label">3+ Cuts</span>
                            <span class="stat-row__value red">570 homes</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ============================================================
             TAPE MODE - Intel Feed (Last 7 Days)
             ============================================================ -->
        <div class="mode" id="mode-tape">

            <div class="section">
                <div class="section__title">Intel Tape</div>
                <p style="color: var(--text-3); font-size: 12px; margin-bottom: 16px;">
                    Material updates from SEC filings, job postings, and market signals. Max 3 items per day.
                </p>

                <div class="tape-feed" id="tape-feed">
                    <!-- Day 1 -->
                    <div class="tape-day">
                        <div class="tape-day__header">
                            <span class="tape-day__date">Jan 29, 2026</span>
                            <span class="tape-day__badge">Today</span>
                        </div>
                        <div class="tape-item tape-item--high">
                            <div class="tape-item__icon">!!!</div>
                            <div class="tape-item__content">
                                <div class="tape-item__headline">SEC 8-K: Results of Operations and Financial Condition</div>
                                <div class="tape-item__detail">Filed Jan 29. Item 2.02: Q4 preliminary results announced</div>
                            </div>
                            <div class="tape-item__meta">
                                <span class="tape-item__type">FILING</span>
                            </div>
                        </div>
                        <div class="tape-item tape-item--medium">
                            <div class="tape-item__icon">!!</div>
                            <div class="tape-item__content">
                                <div class="tape-item__headline">Opendoor posted 3 AI/Platform roles</div>
                                <div class="tape-item__detail">New postings: Sr. ML Engineer, Staff Data Scientist, Platform Arch</div>
                            </div>
                            <div class="tape-item__meta">
                                <span class="tape-item__type">JOBS</span>
                            </div>
                        </div>
                    </div>

                    <!-- Day 2 -->
                    <div class="tape-day">
                        <div class="tape-day__header">
                            <span class="tape-day__date">Jan 28, 2026</span>
                        </div>
                        <div class="tape-item tape-item--medium">
                            <div class="tape-item__icon">!!</div>
                            <div class="tape-item__content">
                                <div class="tape-item__headline">Opendoor posted 2 Pricing/Risk roles</div>
                                <div class="tape-item__detail">New postings: Pricing Analyst, Risk Modeler</div>
                            </div>
                            <div class="tape-item__meta">
                                <span class="tape-item__type">JOBS</span>
                            </div>
                        </div>
                        <div class="tape-item tape-item--low">
                            <div class="tape-item__icon">!</div>
                            <div class="tape-item__content">
                                <div class="tape-item__headline">SEC Form 4: Insider transaction</div>
                                <div class="tape-item__detail">CFO sold 15,000 shares at $2.47</div>
                            </div>
                            <div class="tape-item__meta">
                                <span class="tape-item__type">FILING</span>
                            </div>
                        </div>
                    </div>

                    <!-- Day 3 -->
                    <div class="tape-day">
                        <div class="tape-day__header">
                            <span class="tape-day__date">Jan 27, 2026</span>
                        </div>
                        <div class="tape-item tape-item--low">
                            <div class="tape-item__icon">!</div>
                            <div class="tape-item__content">
                                <div class="tape-item__headline">Opendoor removed 5 job postings net</div>
                                <div class="tape-item__detail">Total open positions: 142</div>
                            </div>
                            <div class="tape-item__meta">
                                <span class="tape-item__type">JOBS</span>
                            </div>
                        </div>
                    </div>

                    <!-- No updates days -->
                    <div class="tape-day tape-day--empty">
                        <div class="tape-day__header">
                            <span class="tape-day__date">Jan 26, 2026</span>
                        </div>
                        <div class="tape-item tape-item--none">
                            <div class="tape-item__content">
                                <div class="tape-item__headline" style="color: var(--text-3);">No material updates</div>
                            </div>
                        </div>
                    </div>

                    <div class="tape-day tape-day--empty">
                        <div class="tape-day__header">
                            <span class="tape-day__date">Jan 25, 2026</span>
                        </div>
                        <div class="tape-item tape-item--none">
                            <div class="tape-item__content">
                                <div class="tape-item__headline" style="color: var(--text-3);">No material updates</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="signal__footer" style="margin-top: 16px;">
                    <div class="signal__source">Sources: SEC EDGAR, Greenhouse API</div>
                    <div class="signal__coverage">Last 7 days only</div>
                </div>
            </div>

        </div>

        <!-- ============================================================
             DISCLAIMER
             ============================================================ -->
        <div class="disclaimer">
            <div class="disclaimer__title">‚ö† Data Confidence & Sources</div>
            <div class="disclaimer__text">
                <strong>Confidence Ratings:</strong>
                <span style="color: var(--green);">A</span> = High (100% coverage, verified source) ¬∑
                <span style="color: var(--yellow);">B</span> = Medium (partial coverage, reliable source) ¬∑
                <span style="color: var(--red);">C</span> = Low (incomplete data, treat as directional only)<br><br>

                <strong>Key Limitations:</strong><br>
                ‚Ä¢ Win rates based on 38.7% P&L coverage (277/715 Q1 sales have Parcl data)<br>
                ‚Ä¢ Inventory liquidity (42.9 mos) uses MLS agent-matching which captures ~7% of actual sales<br>
                ‚Ä¢ Kaz-era = acquired on or after Sep 10, 2025 (CEO Kaz Nejatian start date)<br>
                ‚Ä¢ All cohort definitions centralized in src/config.py<br><br>

                <strong>Sources:</strong> Singularity Research (sales velocity) ¬∑ Parcl Labs (P&L, listings) ¬∑ Opendoor.com (active inventory) ¬∑ MLS/Realtor.com (pending/sold matching)
            </div>
        </div>

    </main>

</div>

<script>
// ============================================================
// TAB NAVIGATION
// ============================================================
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
        // Update active tab
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        // Update active mode
        const mode = tab.dataset.mode;
        document.querySelectorAll('.mode').forEach(m => m.classList.remove('active'));
        document.getElementById('mode-' + mode).classList.add('active');
    });
});

// ============================================================
// CHARTS
// ============================================================
const chartLayout = {
    paper_bgcolor: '#141414',
    plot_bgcolor: '#141414',
    font: { color: '#666', family: 'Inter, sans-serif', size: 10 },
    margin: { t: 20, r: 20, b: 40, l: 50 },
    showlegend: false,
    xaxis: {
        gridcolor: '#222',
        linecolor: '#333',
        tickfont: { size: 9 }
    },
    yaxis: {
        gridcolor: '#222',
        linecolor: '#333',
        tickfont: { size: 9 }
    }
};

// Revenue Chart
function renderRevenueChart() {
    const dates = ['Jan 1', 'Jan 5', 'Jan 10', 'Jan 15', 'Jan 20', 'Jan 25', 'Jan 29'];
    const revenue = [3.8, 9.1, 3.7, 8.4, 14.3, 5.9, 14.4];
    const target = Array(7).fill(11.1);

    Plotly.newPlot('revenue-chart', [
        {
            x: dates,
            y: revenue,
            type: 'bar',
            marker: { color: revenue.map(r => r >= 11.1 ? '#22c55e' : '#eab308') }
        },
        {
            x: dates,
            y: target,
            type: 'scatter',
            mode: 'lines',
            line: { color: '#f59e0b', dash: 'dash', width: 2 }
        }
    ], {
        ...chartLayout,
        yaxis: { ...chartLayout.yaxis, title: '$M/day' }
    }, { displayModeBar: false, responsive: true });
}

// Toxic Chart
function renderToxicChart() {
    const weeks = ['W1', 'W2', 'W3', 'W4'];
    const toxic = [89, 85, 84, 82];

    Plotly.newPlot('toxic-chart', [{
        x: weeks,
        y: toxic,
        type: 'scatter',
        mode: 'lines+markers',
        line: { color: '#22c55e', width: 2 },
        marker: { size: 8 }
    }], {
        ...chartLayout,
        yaxis: { ...chartLayout.yaxis, range: [70, 95] }
    }, { displayModeBar: false, responsive: true });
}

// Win Rate Chart
function renderWinRateChart() {
    const days = ['Jan 15', 'Jan 18', 'Jan 21', 'Jan 24', 'Jan 27', 'Jan 29'];
    const winRate = [78.5, 79.2, 78.8, 79.5, 79.0, 79.1];

    Plotly.newPlot('winrate-chart', [{
        x: days,
        y: winRate,
        type: 'scatter',
        mode: 'lines+markers',
        line: { color: '#3b82f6', width: 2 },
        marker: { size: 6 },
        fill: 'tozeroy',
        fillcolor: 'rgba(59, 130, 246, 0.1)'
    }], {
        ...chartLayout,
        yaxis: { ...chartLayout.yaxis, range: [70, 85], ticksuffix: '%' }
    }, { displayModeBar: false, responsive: true });
}

// Initialize charts when Tape mode is shown
document.querySelector('[data-mode="tape"]').addEventListener('click', () => {
    setTimeout(() => {
        renderRevenueChart();
        renderToxicChart();
        renderWinRateChart();
    }, 100);
});

// ============================================================
// LOAD DATA
// ============================================================
async function loadData() {
    try {
        const response = await fetch('outputs/dashboard_data.json');
        if (response.ok) {
            const data = await response.json();
            updateDashboard(data);
        }
    } catch (e) {
        console.log('Using default data');
    }
}

function updateDashboard(data) {
    // Update timestamp
    if (data.generated_at) {
        document.getElementById('last-updated').textContent = 'Updated: ' + new Date(data.generated_at).toLocaleString();
    }

    // Additional data binding would go here
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    loadData();
    // Pre-render charts for Tape mode
    if (document.getElementById('revenue-chart')) {
        renderRevenueChart();
        renderToxicChart();
        renderWinRateChart();
    }
});
</script>
</body>
</html>
